<?php
defined('BASEPATH') OR exit('No direct script access allowed');

require_once APPPATH . 'libraries/REST_Controller.php'; 
require_once APPPATH . 'libraries/Format.php'; 

class FindPassword extends REST_Controller {

	function __construct() {
		parent::__construct() ;
		$this->load->model(array('Member_m', 'Common_m'));
	}

	public function index_post() {

		$params = json_decode(file_get_contents('php://input'), TRUE);

		$searchParam = array();
		$searchParam['lang'] = "kr";

		if (isset($params['lang']))
			$searchParam['lang'] = $params['lang'];

		$searchParam['mem_email'] = $params['mem_email'];

		if($searchParam['mem_email']=="") {
			echo json_encode(array(
					'result' => 'FAILURE', 
					'message' => $this->Common_m->getLocalMessage("이메일이 입력되지 않았습니다", $searchParam['lang'])
			)); 
			exit;
		}

		$result = $this->Member_m->selectMemberDetailInfo($searchParam);

		if($result['result'] == "FAILURE") { 
			$result = array(
					'result' => 'FAILURE', 
					'message' => $this->Common_m->getLocalMessage("해당 메일 주소가 가입되어 있지 않습니다. 다시 정확하게 입력해주세요.", $searchParam['lang'])
			);
		} else { 

			$memberData = $result['mem_info'];

			switch ($memberData['mem_jointype']) {
				case 'EMAIL':
					$new_password = $this->Member_m->createNewPassword() ;					

					$header = "From: jong8884@gmail.com\n";
					$header .= "MIME-Version: 1.0\n";
					// $header .= "X-Priority: 3\n";
					$header .= "X-MSMail-Priority: Normal\n";
					$header .= "X-Mailer: FormMailer\n";
					$header .= "Content-Type: text/html;\n \tcharset=utf-8\n";

					$subject = "=?UTF-8?B?".base64_encode("[NOBLE 반주기] 비밀번호를 알려드립니다.")."?="; 

$message ='<div style="max-width: 700px; background-color: #efefee; text-align: center;padding-top:100px; padding-bottom: 36px;">';
$message .= '<div style="text-align: center;"><img src="'.SERVERURL.'/assets/images/email_title.png"></div>';
$message .= '<div style="text-align: center; color: #563A28; font-size: 18px; margin-top:48px; line-height:24px;">안녕하세요. 노블 오카리나입니다.<br>비밀번호를 알려드립니다. 감사합니다.</div>';
$message .= '<div style="margin-top:68px; margin-left: auto; margin-right: auto; margin-bottom: 30px; text-align: center; background-color: #FFFFFF; width: 68%;height: 58px; min-width: 300px;color: #563A28; font-size: 18px; line-height: 58px;">메일주소 : '.$searchParam['mem_email'].'</div>';
$message .= '<div style="margin: 0 auto; text-align: center; background-color: #FFFFFF; width: 68%; height: 58px; min-width: 300px; color: #563A28; font-size: 18px; line-height: 58px;">비밀번호 : '.$new_password.'</div>';
$message .= '<div style="text-align: center; margin-top: 182px;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMEAAAA1CAIAAAB3IxjEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5MThiZmM0Ny04ZWIyLWU5NDYtODE3Yy0wZDYwNDllZDQ2YzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkQ1NUVGMzQ4QkNDMTFFODk3MDY5QUI5RTY0NkY0NUYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkQ1NUVGMzM4QkNDMTFFODk3MDY5QUI5RTY0NkY0NUYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N2VhMTI5MmEtMjU0ZS04YzRiLTllZWItMjg2ZDNhNTgzOGRlIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjkxOGJmYzQ3LThlYjItZTk0Ni04MTdjLTBkNjA0OWVkNDZjMSIv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" /></div>';
$message .= '</div>';

					mail($searchParam['mem_email'], $subject, $message, $header);					

					$updateMember = array(
						'table_name' => 'MEMBER',
						'update_columns' => array('mem_password' => md5($new_password)),
						'where_case' => array('mem_email' => $searchParam['mem_email'])
					);

					$this->common_m->updateQuery($updateMember);

					$result = array(
							'result' => 'SUCCESS', 
							'message' => $this->Common_m->getLocalMessage("가입했던 메일로 비밀번호가 전송되었습니다.", $searchParam['lang'])
					);
					break;
				case 'KAKAO':
					$result = array(
							'result' => 'FAILURE', 
							'message' => $this->Common_m->getLocalMessage("카카오 ID로 가입한 메일 주소입니다.'", $searchParam['lang'])
					);
					break;
				case 'NAVER':
					$result = array(
							'result' => 'FAILURE', 
							'message' => $this->Common_m->getLocalMessage("네이버 ID로 가입한 메일 주소입니다.'", $searchParam['lang'])
					);
					break;
				case 'GOOGLE':
					$result = array(
							'result' => 'FAILURE', 
							'message' => $this->Common_m->getLocalMessage("구글 ID로 가입한 메일 주소입니다.'", $searchParam['lang'])
					);
					break;
			}
		}

		$this->response($result, 200);
	}
}
